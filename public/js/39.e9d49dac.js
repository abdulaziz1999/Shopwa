(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[39],{ba30:function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-page",[i("q-header",[i("q-toolbar",[i("q-btn",{directives:[{name:"go-back",rawName:"v-go-back.single",modifiers:{single:!0}}],attrs:{flat:"",round:"",dense:"",icon:"arrow_back"}}),i("q-toolbar-title",[t._v("\n       Edit Produk\n      ")])],1)],1),i("q-form",{on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[i("div",{staticClass:"q-pa-md"},[i("div",[i("q-input",{attrs:{type:"text",label:"Nama Produk",rules:[function(t){return t&&""!=t||"Nama produk harus diisi"}]},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}}),i("q-input",{attrs:{mask:"#########",label:"Harga",rules:[function(t){return t&&""!=t||"Harga Jual harus diisi"}]},model:{value:t.form.price,callback:function(e){t.$set(t.form,"price",e)},expression:"form.price"}}),i("q-input",{attrs:{mask:"#####",label:"Stok",rules:[function(t){return t&&""!=t||"Stok harus diisi"}]},model:{value:t.form.stock,callback:function(e){t.$set(t.form,"stock",e)},expression:"form.stock"}}),i("q-input",{attrs:{mask:"#####",label:"Berat",suffix:"gram",rules:[function(t){return t&&t>49||"Berat harus diisi min 50 gram"}]},model:{value:t.form.weight,callback:function(e){t.$set(t.form,"weight",e)},expression:"form.weight"}}),t.errors.stock?i("div",{staticClass:"text-xs text-red"},[t._v(" "+t._s(t.errors.weight[0]))]):t._e(),i("q-select",{staticClass:"q-pb-md",attrs:{options:t.categories,label:"Kategori","emit-value":"","map-options":""},model:{value:t.form.category_id,callback:function(e){t.$set(t.form,"category_id",e)},expression:"form.category_id"}}),i("div",{staticClass:"q-mt-md"},[i("label",{staticClass:"text-grey-7",attrs:{for:"description"}},[t._v("Deskripsi")]),i("q-editor",{model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}}),t.errors.description?i("div",{staticClass:"text-xs text-red"},[t._v(" "+t._s(t.errors.description[0]))]):t._e()],1),i("section",{staticClass:"q-my-md q-gutter-y-sm",attrs:{id:"image-section"}},[i("div",[i("q-btn",{staticClass:"mt-2 mr-2",attrs:{label:"Upload Gambar Produk",size:"sm",color:"primary",icon:"upload",type:"button"},on:{click:function(e){return e.preventDefault(),t.selectNewImage(e)}}}),i("input",{ref:"image",staticClass:"hidden",attrs:{type:"file",multiple:""},on:{change:t.updateImagePreview}})],1),i("q-list",{attrs:{separator:""}},[t._l(t.imagePreview,(function(e,r){return i("q-item",{key:r},[i("q-item-section",[i("img",{staticClass:"shadow-4 q-pa-xs bg-white",staticStyle:{width:"100px",height:"70px","object-fit":"cover"},attrs:{src:e}})]),i("q-item-section",{attrs:{side:""}},[i("q-btn",{attrs:{size:"sm",round:"",icon:"delete",glossy:"",color:"red"},on:{click:function(e){return e.preventDefault(),t.removeLocalImage(r)}}})],1)],1)})),t._l(t.oldImages,(function(e){return i("q-item",{key:e.id},[i("q-item-section",[i("img",{staticClass:"shadow-4 q-pa-xs bg-white",staticStyle:{width:"100px",height:"70px","object-fit":"cover"},attrs:{src:e.src}})]),i("q-item-section",{attrs:{side:""}},[i("q-btn",{attrs:{size:"sm",round:"",icon:"delete",glossy:"",color:"red"},on:{click:function(i){return i.preventDefault(),t.removeImage(e)}}})],1)],1)}))],2)],1)],1)]),i("q-footer",[i("q-btn",{staticClass:"full-width",attrs:{type:"submit",loading:t.loading,label:"Simpan Data"}},[i("q-tooltip",{staticClass:"bg-accent"},[t._v("Simpan Data")])],1)],1)],1)],1)},s=[],a=i("ded3"),o=i.n(a),n=(i("4de4"),i("a4d3"),i("e01a"),i("2f62")),c={data:function(){return{requiredRules:[function(t){return t&&t.length>0||"Field harus diisi."}],product:this.$store.getters["product/getProductById"](parseInt(this.$route.params.id)),form:{id:"",title:"",price:"",weight:"",stock:"",category_id:"",description:"",images:[],del_images:[]},imagePreview:[],oldImages:[]}},computed:{errors:function(){return this.$store.state.errors},loading:function(){return this.$store.state.loading},categories:function(){return this.$store.getters["category/getValueOptions"]}},methods:o()(o()(o()({},Object(n["b"])("product",["productUpdate","getProductById"])),Object(n["b"])("category",["getCategories"])),{},{submit:function(){var t=new FormData;for(var e in this.form)"images"!=e&&"del_images"!=e&&this.form[e]&&t.append(e,this.form[e]);if(this.form.images.length>0)for(var i=0;i<this.form.images.length;i++){var r=this.form.images[i];t.append("images["+i+"]",r)}if(this.form.del_images.length>0)for(i=0;i<this.form.del_images.length;i++){var s=this.form.del_images[i];t.append("del_images["+i+"]",s)}this.productUpdate(t)},selectNewImage:function(){this.$refs.image.click()},updateImagePreview:function(){for(var t=this,e=this.$refs.image.files,i=0;i<e.length;i++){this.form.images.push(e[i]);var r=new FileReader;r.onload=function(e){t.imagePreview.push(e.target.result)},r.readAsDataURL(e[i])}},removeLocalImage:function(t){this.imagePreview=this.imagePreview.filter((function(e,i){return i!==t})),this.form.images=this.form.images.filter((function(e,i){return i!==t}))},removeImage:function(t){this.oldImages=this.oldImages.filter((function(e){return e.id!==t.id})),this.form.del_images.push(t.filename)},setData:function(){this.form.id=this.product.id,this.form.title=this.product.title,this.form.price=this.product.price,this.form.weight=this.product.weight,this.form.stock=this.product.stock,this.form.category_id=this.product.category_id,this.form.description=this.product.description,this.oldImages=this.product.assets},money:function(t){return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(t)}}),mounted:function(){var t=this;this.product?this.setData():this.getProductById(this.$route.params.id).then((function(e){t.product=e.data.results,t.setData()})),this.categories.length||this.getCategories()}},l=c,m=i("2877"),d=i("9989"),u=i("e359"),f=i("65c6"),g=i("9c40"),p=i("6ac5"),h=i("0378"),b=i("27f9"),v=i("ddd8"),k=i("d66b"),w=i("1c1c"),q=i("66e5"),y=i("4074"),_=i("7ff0"),I=i("05c0"),x=i("2eeb"),C=i("eebe"),$=i.n(C),D=Object(m["a"])(l,r,s,!1,null,null,null);e["default"]=D.exports;$()(D,"components",{QPage:d["a"],QHeader:u["a"],QToolbar:f["a"],QBtn:g["a"],QToolbarTitle:p["a"],QForm:h["a"],QInput:b["a"],QSelect:v["a"],QEditor:k["a"],QList:w["a"],QItem:q["a"],QItemSection:y["a"],QFooter:_["a"],QTooltip:I["a"]}),$()(D,"directives",{GoBack:x["a"]})}}]);