(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[32],{bd1a:function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("q-page",[o("q-header",[o("q-toolbar",[o("q-btn",{attrs:{to:{name:"DiscountIndex",query:{q:"promo"}},flat:"",round:"",dense:"",icon:"arrow_back"}}),o("q-toolbar-title",[t._v("\n       Produk Promo\n      ")])],1)],1),t.promoted?o("div",{staticClass:"q-pa-md"},[o("div",{staticClass:"row items-center justify-between"},[o("div",{staticClass:"text-h6"},[t._v(t._s(t.promoted.label)+" "),o("span",[o("q-chip",{attrs:{size:"sm","text-color":"white",color:t.promoted.is_active?"green":"grey",label:t.promoted.is_active?"Active":"Inactive"}})],1)]),o("div",{staticClass:"row items-center q-gutter-x-sm"},[o("q-btn",{attrs:{unelevated:"",color:"teal"},on:{click:t.handleAddProductPromoted}},[o("q-icon",{attrs:{name:"add"}}),o("span",[t._v("Produk")])],1)],1)])]):t._e(),t.promoted?o("q-list",{attrs:{separator:""}},[o("q-item",[o("q-item-section",[t._v("Label / Diskon")]),o("q-item-section",[t._v("Waktu")])],1),o("q-item",[o("q-item-section",[o("q-item-label",[t._v(t._s(t.promoted.label))]),o("div",[o("q-chip",{attrs:{square:"","text-color":"white",color:"green",size:"sm"}},[t._v(t._s(t.promoted.discount.label))])],1)],1),o("q-item-section",[o("q-item-label",[t._v("Start: "+t._s(t.promoted.start_date))]),o("q-item-label",[t._v("Selesai: "+t._s(t.promoted.end_date))])],1)],1)],1):t._e(),o("div",{staticClass:"q-pa-md text-md q-mt-lg"},[t._v("Produk Total "+t._s(t.products.length))]),t.products.length?o("q-list",{attrs:{separator:""}},[o("q-item",[o("q-item-section",{attrs:{side:""}},[t._v("#")]),o("q-item-section",[t._v("Nama")]),o("q-item-section",[t._v("Stok")]),o("q-item-section",{attrs:{side:""}},[t._v("Actions")])],1),t._l(t.products,(function(e,i){return o("q-item",{key:i},[o("q-item-section",{attrs:{side:""}},[t._v(t._s(i+1))]),o("q-item-section",[t._v(t._s(e.title))]),o("q-item-section",[t._v(t._s(e.variant_items_sum_item_stock?e.variant_items_sum_item_stock:e.stock))]),o("q-item-section",{attrs:{side:""}},[o("q-btn",{attrs:{icon:"delete",padding:"4px",size:"sm",unelevated:"",color:"red",disabled:t.syncLoading},on:{click:function(o){return t.syncProduct(e.id)}}})],1)],1)}))],2):t._e(),o("q-dialog",{attrs:{persistent:""},model:{value:t.searchModal,callback:function(e){t.searchModal=e},expression:"searchModal"}},[o("q-card",{staticClass:"card-medium"},[o("div",{staticClass:"flex justify-between items-center card-heading"},[o("div",{},[t._v(" Produk Promo")]),o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",round:"",padding:"0px",flat:""}})],1),o("q-card-section",{staticClass:"q-gutter-y-sm",staticStyle:{"min-height":"150px","max-height":"400px","overflow-y":"auto"}},[t.productSearch.length?o("div",[o("q-list",t._l(t.productSearch,(function(e){return o("q-item",{key:e.id},[o("q-item-section",[t._v(t._s(e.title))]),o("q-item-section",{attrs:{side:""}},[o("q-btn",{attrs:{icon:t.isSelected?"check_box":"check_box_outline_blank",padding:"0px",unelevated:"",color:t.isSelected(e.id)?"primary":"grey"},on:{click:function(o){return t.syncProduct(e.id)}}})],1)],1)})),1)],1):t._e(),o("q-inner-loading",{attrs:{showing:t.isLoading}}),t.isLoading||t.products.length?t._e():o("div",{staticClass:"text-center q-pt-lg"},[t._v("Tidak tidak ditemukan")])],1)],1)],1)],1)},s=[],a=(o("d3b7"),o("e6cf"),o("a79d"),o("caad"),o("2532"),o("4de4"),o("ac1f"),o("841c"),o("758b")),r={name:"ProductPromoted",data:function(){return{product_ids:[],promoted:null,isLoading:!1,syncLoading:!1,searchModal:!1,search:"",productSearch:[],products:[]}},methods:{getPromoDetail:function(){var t=this;Object(a["a"])().get("getPromoDetail/"+this.$route.params.id).then((function(e){200==e.status&&(t.products=e.data.results.products,t.promoted=e.data.results.promoted)}))},getProductPromo:function(){var t=this;Object(a["a"])().get("getProductPromo/"+this.$route.params.id).then((function(e){200==e.status&&(t.products=e.data.results)}))},findProduct:function(){var t=this;this.isLoading=!0,this.productSearch=[],Object(a["a"])().get("findNotDiscountProduct").then((function(e){200==e.status&&(t.productSearch=e.data.results,console.log(t,productSearch))})).finally((function(){t.isLoading=!1}))},selectProduct:function(t){this.product_ids.includes(t)?this.product_ids=this.product_ids.filter((function(e){return e!=t})):this.product_ids.push(t)},isSelected:function(t){return this.products.filter((function(e){return e.id==t})).length>0},handleAddProductPromoted:function(){this.search="",this.searchModal=!0,this.productSearch=[],this.findProduct()},syncProduct:function(t){var e=this;this.syncLoading=!0,Object(a["a"])().post("toggleProductPromo",{promote_id:this.$route.params.id,product_id:t}).then((function(){e.getProductPromo()})).finally((function(){e.syncLoading=!1}))}},mounted:function(){this.getPromoDetail()}},c=r,n=o("2877"),d=o("9989"),l=o("e359"),u=o("65c6"),m=o("9c40"),p=o("6ac5"),h=o("b047"),_=o("0016"),q=o("1c1c"),v=o("66e5"),g=o("4074"),f=o("0170"),b=o("24e8"),P=o("f09f"),k=o("a370"),y=o("74f7"),x=o("7f67"),w=o("eebe"),S=o.n(w),Q=Object(n["a"])(c,i,s,!1,null,null,null);e["default"]=Q.exports;S()(Q,"components",{QPage:d["a"],QHeader:l["a"],QToolbar:u["a"],QBtn:m["a"],QToolbarTitle:p["a"],QChip:h["a"],QIcon:_["a"],QList:q["a"],QItem:v["a"],QItemSection:g["a"],QItemLabel:f["a"],QDialog:b["a"],QCard:P["a"],QCardSection:k["a"],QInnerLoading:y["a"]}),S()(Q,"directives",{ClosePopup:x["a"]})}}]);