(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[38],{"826c":function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-page",[r("q-header",[r("q-toolbar",[r("q-btn",{directives:[{name:"go-back",rawName:"v-go-back.single",modifiers:{single:!0}}],attrs:{flat:"",round:"",dense:"",icon:"arrow_back"}}),r("q-toolbar-title",[e._v("\n       Tambah Produk\n      ")])],1)],1),r("q-form",{on:{submit:function(t){return t.preventDefault(),e.submit(t)}}},[r("div",{staticClass:"q-pa-md"},[r("q-input",{attrs:{type:"text",label:"Nama Produk",rules:e.requiredRules},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}}),e.errors.title?r("div",{staticClass:"text-xs text-red"},[e._v(" "+e._s(e.errors.title[0]))]):e._e(),r("q-input",{attrs:{mask:"#########",label:"Harga",rules:e.requiredRules},model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}}),e.errors.price?r("div",{staticClass:"text-xs text-red"},[e._v(" "+e._s(e.errors.price[0]))]):e._e(),r("q-input",{attrs:{mask:"#####",label:"Stok",rules:e.requiredRules},model:{value:e.form.stock,callback:function(t){e.$set(e.form,"stock",t)},expression:"form.stock"}}),e.errors.stock?r("div",{staticClass:"text-xs text-red"},[e._v(" "+e._s(e.errors.stock[0]))]):e._e(),r("q-input",{attrs:{mask:"#####",label:"Berat",suffix:"gram",rules:[function(e){return e&&e>49||"Berat harus diisi min 50 gram"}]},model:{value:e.form.weight,callback:function(t){e.$set(e.form,"weight",t)},expression:"form.weight"}}),e.errors.stock?r("div",{staticClass:"text-xs text-red"},[e._v(" "+e._s(e.errors.weight[0]))]):e._e(),r("q-select",{staticClass:"q-pb-md",attrs:{options:e.categories,label:"Kategori","emit-value":"","map-options":""},model:{value:e.form.category_id,callback:function(t){e.$set(e.form,"category_id",t)},expression:"form.category_id"}}),r("div",{staticClass:"q-mt-md"},[r("label",{staticClass:"text-grey-7",attrs:{for:"description"}},[e._v("Deskripsi")]),r("q-editor",{model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}}),e.errors.description?r("div",{staticClass:"text-xs text-red"},[e._v(" "+e._s(e.errors.description[0]))]):e._e()],1),r("section",{staticClass:"q-my-lg q-gutter-y-sm",attrs:{id:"image-section"}},[r("div",[r("q-btn",{staticClass:"mt-2 mr-2",attrs:{label:"Upload Gambar Produk",size:"sm",color:"primary",icon:"upload",type:"button"},on:{click:function(t){return t.preventDefault(),e.selectNewImage(t)}}})],1),r("input",{ref:"image",staticClass:"hidden",attrs:{type:"file",multiple:""},on:{change:e.updateImagePreview}}),r("q-list",{attrs:{separator:""}},e._l(e.imagePreview,(function(t,i){return r("q-item",{key:i},[r("q-item-section",[r("img",{staticClass:"shadow-4 q-pa-xs bg-white",staticStyle:{width:"100px",height:"70px","object-fit":"cover"},attrs:{src:t}})]),r("q-item-section",{attrs:{side:""}},[r("q-btn",{attrs:{size:"sm",round:"",icon:"delete",glossy:"",color:"red"},on:{click:function(t){return t.preventDefault(),e.removeImage(i)}}})],1)],1)})),1)],1)],1),r("q-footer",[r("q-btn",{staticClass:"full-width",attrs:{type:"submit",loading:e.loading,label:"Simpan Data"}},[r("q-tooltip",{staticClass:"bg-accent"},[e._v("Simpan Data")])],1)],1)],1)],1)},s=[],a=r("ded3"),o=r.n(a),n=(r("4de4"),r("2f62")),c={data:function(){return{requiredRules:[function(e){return e&&e.length>0||"Field harus diisi."}],form:{title:"",price:"",weight:"",stock:"",description:"",category_id:"",images:[]},imagePreview:[]}},computed:{errors:function(){return this.$store.state.errors},loading:function(){return this.$store.state.loading},categories:function(){return this.$store.getters["category/getValueOptions"]}},methods:o()(o()(o()({},Object(n["b"])("product",["productStore"])),Object(n["b"])("category",["getCategories"])),{},{submit:function(){var e=new FormData;for(var t in this.form)"images"!=t&&this.form[t]&&e.append(t,this.form[t]);for(var r=0;r<this.form.images.length;r++){var i=this.form.images[r];e.append("images["+r+"]",i)}this.productStore(e)},selectNewImage:function(){this.$refs.image.click()},updateImagePreview:function(){for(var e=this,t=this.$refs.image.files,r=0;r<t.length;r++){this.form.images.push(t[r]);var i=new FileReader;i.onload=function(t){e.imagePreview.push(t.target.result)},i.readAsDataURL(t[r])}},removeImage:function(e){this.imagePreview=this.imagePreview.filter((function(t,r){return r!==e})),this.form.images=this.form.images.filter((function(t,r){return r!==e}))},money:function(e){return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(e)}}),mounted:function(){this.categories.length||this.getCategories()}},l=c,m=r("2877"),u=r("9989"),d=r("e359"),f=r("65c6"),g=r("9c40"),p=r("6ac5"),b=r("0378"),v=r("27f9"),h=r("ddd8"),k=r("d66b"),q=r("1c1c"),w=r("66e5"),x=r("4074"),_=r("7ff0"),y=r("05c0"),C=r("2eeb"),Q=r("eebe"),I=r.n(Q),$=Object(m["a"])(l,i,s,!1,null,null,null);t["default"]=$.exports;I()($,"components",{QPage:u["a"],QHeader:d["a"],QToolbar:f["a"],QBtn:g["a"],QToolbarTitle:p["a"],QForm:b["a"],QInput:v["a"],QSelect:h["a"],QEditor:k["a"],QList:q["a"],QItem:w["a"],QItemSection:x["a"],QFooter:_["a"],QTooltip:y["a"]}),I()($,"directives",{GoBack:C["a"]})}}]);