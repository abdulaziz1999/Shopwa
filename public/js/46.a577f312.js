(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[46],{"826c":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",[a("q-header",[a("q-toolbar",[a("q-btn",{directives:[{name:"go-back",rawName:"v-go-back.single",modifiers:{single:!0}}],attrs:{flat:"",round:"",dense:"",icon:"arrow_back"}}),a("q-toolbar-title",[t._v("\n       Tambah Produk\n      ")]),t.form.variants.length?t._e():a("q-btn",{attrs:{flat:"",icon:"add",label:"Produk Variasi"},on:{click:t.handleAddVariant}})],1)],1),a("q-form",{on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("div",{staticClass:"q-pa-md q-gutter-y-sm"},[a("q-input",{attrs:{filled:"",type:"text",label:"Nama Produk",rules:t.requiredRules},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}}),t.errors.title?a("div",{staticClass:"text-xs text-red"},[t._v(" "+t._s(t.errors.title[0]))]):t._e(),a("div",{staticClass:"row items-center q-gutter-x-sm"},[a("div",{staticClass:"col"},[a("q-input",{attrs:{filled:"",mask:"#########",label:"Harga",rules:t.requiredRules},model:{value:t.form.price,callback:function(e){t.$set(t.form,"price",e)},expression:"form.price"}})],1),a("div",{staticClass:"col"},[a("q-input",{attrs:{filled:"",mask:"#####",label:"Stok",rules:t.requiredRules},model:{value:t.form.stock,callback:function(e){t.$set(t.form,"stock",e)},expression:"form.stock"}})],1),a("div",{staticClass:"col"},[a("q-input",{attrs:{filled:"",mask:"#####",label:"Berat",suffix:"gram",rules:[function(t){return t&&t>49||"Berat harus diisi min 50 gram"}]},model:{value:t.form.weight,callback:function(e){t.$set(t.form,"weight",e)},expression:"form.weight"}})],1)]),a("q-select",{staticClass:"q-pb-md",attrs:{filled:"",options:t.categories,label:"Kategori","emit-value":"","map-options":""},model:{value:t.form.category_id,callback:function(e){t.$set(t.form,"category_id",e)},expression:"form.category_id"}}),a("div",{staticClass:"q-mt-md q-mb-sm"},[a("label",{staticClass:"text-grey-7 q-pb-sm block",attrs:{for:"description"}},[t._v("Deskripsi")]),a("q-editor",{model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}}),t.errors.description?a("div",{staticClass:"text-xs text-red"},[t._v(" "+t._s(t.errors.description[0]))]):t._e()],1),a("section",{staticClass:"q-my-lg q-gutter-y-sm",attrs:{id:"image-section"}},[a("div",[a("q-btn",{staticClass:"mt-2 mr-2",attrs:{label:"Upload Gambar Produk",size:"sm",color:"primary",icon:"upload",type:"button"},on:{click:function(e){return e.preventDefault(),t.selectNewImage(e)}}})],1),a("input",{ref:"image",staticClass:"hidden",attrs:{type:"file",multiple:""},on:{change:t.updateImagePreview}}),a("q-list",{attrs:{separator:""}},t._l(t.imagePreview,(function(e,i){return a("q-item",{key:i},[a("q-item-section",[a("img",{staticClass:"shadow-4 q-pa-xs bg-white",staticStyle:{width:"100px",height:"70px","object-fit":"cover"},attrs:{src:e}})]),a("q-item-section",{attrs:{side:""}},[a("q-btn",{attrs:{size:"sm",round:"",icon:"delete",glossy:"",color:"red"},on:{click:function(e){return e.preventDefault(),t.removeImage(i)}}})],1)],1)})),1)],1)],1),t.form.variants.length?a("div",{attrs:{id:"variants"}},[a("div",{staticClass:"row items-center q-mt-xl q-pa-md q-gutter-x-md"},[a("div",{staticClass:"text-md2 text-weight-medium"},[t._v("Produk Variasi")]),a("q-btn",{attrs:{padding:"4px 8px",size:"13px",unelevated:"",color:"blue-6"},on:{click:t.handleAddVariant}},[a("q-icon",{attrs:{name:"edit"}}),a("span",[t._v("Edit")])],1)],1),t._l(t.form.variants,(function(e,i){return a("div",{key:i,staticClass:"q-pa-md bg-grey-2",staticStyle:{"min-height":"100px"}},t._l(e.variant_items,(function(r,s){return a("div",{key:s,staticClass:"q-mb-md"},[a("div",{staticClass:"text-md text-weight-medium q-pb-xs"},[t._v(t._s(e.variant_name)+" "+t._s(r.variant_item_label))]),a("q-list",{staticClass:"bg-grey-3 q-pa-sm"},t._l(r.variant_item_values,(function(r,n){return a("q-item",{key:n,staticClass:"q-pa-md bg-white q-mb-sm"},[a("q-item-section",[a("q-input",{attrs:{"stack-label":"",filled:"",square:"",required:"",dense:"",label:e.variant_item_name},model:{value:t.form.variants[i].variant_items[s].variant_item_values[n].item_label,callback:function(e){t.$set(t.form.variants[i].variant_items[s].variant_item_values[n],"item_label",e)},expression:"form.variants[varIndex].variant_items[itemIndex].variant_item_values[subItemIndex].item_label"}})],1),a("q-item-section",[a("q-input",{attrs:{"stack-label":"",filled:"",square:"",required:"",dense:"",label:"Additional Price",type:"number",min:"0"},model:{value:t.form.variants[i].variant_items[s].variant_item_values[n].additional_price,callback:function(e){t.$set(t.form.variants[i].variant_items[s].variant_item_values[n],"additional_price",e)},expression:"form.variants[varIndex].variant_items[itemIndex].variant_item_values[subItemIndex].additional_price"}})],1),a("q-item-section",[a("q-input",{attrs:{"stack-label":"",filled:"",square:"",required:"",dense:"",label:"Stok",type:"number",min:"0"},model:{value:t.form.variants[i].variant_items[s].variant_item_values[n].item_stock,callback:function(e){t.$set(t.form.variants[i].variant_items[s].variant_item_values[n],"item_stock",e)},expression:"form.variants[varIndex].variant_items[itemIndex].variant_item_values[subItemIndex].item_stock"}})],1)],1)})),1)],1)})),0)}))],2):t._e(),a("q-footer",[a("q-btn",{staticClass:"full-width",attrs:{type:"submit",loading:t.loading,label:"Simpan Data"}},[a("q-tooltip",{staticClass:"bg-accent"},[t._v("Simpan Data")])],1)],1)],1),a("q-dialog",{model:{value:t.variantModalForm,callback:function(e){t.variantModalForm=e},expression:"variantModalForm"}},[a("q-card",{staticClass:"card-medium"},[a("q-form",{on:{submit:function(e){return e.preventDefault(),t.addVariant(e)}}},[a("div",{staticClass:"card-heading"},[t._v("Tambah Produk Varian")]),a("q-card-section",[a("q-input",{attrs:{required:"","stack-label":"",label:"Nama Varian"},model:{value:t.tempVarian,callback:function(e){t.tempVarian=e},expression:"tempVarian"}}),a("div",{staticClass:"text-sm text-teal q-mt-xs q-mb-sm"},[t._v("\n              Nama Varian, Contoh: Warna\n            ")]),a("q-input",{attrs:{required:"","stack-label":"",label:"Nama Subvarian"},model:{value:t.tempSubvarian,callback:function(e){t.tempSubvarian=e},expression:"tempSubvarian"}}),a("div",{staticClass:"text-sm text-teal q-mt-xs q-mb-sm"},[t._v("\n              Contoh: Ukuran\n            ")]),a("q-input",{attrs:{required:"","stack-label":"",label:"Varian Item"},model:{value:t.tempVarianItem,callback:function(e){t.tempVarianItem=e},expression:"tempVarianItem"}}),a("div",{staticClass:"text-sm text-teal q-mt-xs q-mb-sm"},[t._v("\n              Gunakan tanda koma (,) jika ingin membuat banyak sekaligus contoh: S,M,L,XL\n            ")]),a("div",{staticClass:"row justify-end q-mt-md q-gutter-x-sm"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{type:"button",label:"Batal",unelevated:"",color:"primary",outline:""}}),a("q-btn",{attrs:{type:"submit",label:"Tambah",unelevated:"",color:"primary"}})],1)],1)],1)],1)],1)],1)},r=[],s=a("ded3"),n=a.n(s),o=(a("ac1f"),a("1276"),a("159b"),a("498a"),a("a4d3"),a("e01a"),a("4de4"),a("2f62")),l={name:"ProductFormCreate",data:function(){return{tempVarian:"",tempSubvarian:"",tempVarianItem:"",requiredRules:[function(t){return t&&t.length>0||"Field harus diisi."}],form:{title:"",price:"",weight:"",stock:"",description:"",category_id:"",variants:[],images:[]},imagePreview:[],variantModalForm:!1}},computed:{errors:function(){return this.$store.state.errors},loading:function(){return this.$store.state.loading},categories:function(){return this.$store.getters["category/getValueOptions"]}},methods:n()(n()(n()({},Object(o["b"])("product",["productStore"])),Object(o["b"])("category",["getCategories"])),{},{addVariant:function(){var t={variant_name:this.tempVarian,variant_item_name:this.tempSubvarian,variant_items:[]};this.form.variants.push(t),this.tempVarian="",this.tempSubvarian="",this.tempVarianItem="",this.variantModal=!1},addVariantItem:function(){var t=this,e={variant_item_label:this.tempVarianItem,variant_item_values:[]},a=this.tempVarianValue.split(",");a.forEach((function(a){e.variant_item_values.push({item_sku:t.getSku(),item_label:a.trim(),additional_price:0,item_stock:0})})),this.variants[this.variantSelectedIndex].variant_items.push(e),this.variantSelectedIndex=null,this.tempVarianItem="",this.variantItemModal=!1},handleAddVariant:function(){this.variantModalForm=!0},submit:function(){var t=new FormData;t.append("title",this.form.title),t.append("price",this.form.price),t.append("weight",this.form.weight),t.append("stock",this.form.stock),t.append("description",this.form.description),this.form.category_id&&t.append("category_id",this.form.category_id),this.form.variants.length&&t.append("variants",JSON.stringify(this.form.variants));for(var e=0;e<this.form.images.length;e++){var a=this.form.images[e];t.append("images["+e+"]",a)}this.productStore(t)},selectNewImage:function(){this.$refs.image.click()},updateImagePreview:function(){for(var t=this,e=this.$refs.image.files,a=0;a<e.length;a++){this.form.images.push(e[a]);var i=new FileReader;i.onload=function(e){t.imagePreview.push(e.target.result)},i.readAsDataURL(e[a])}},removeImage:function(t){this.imagePreview=this.imagePreview.filter((function(e,a){return a!==t})),this.form.images=this.form.images.filter((function(e,a){return a!==t}))},getSku:function(){for(var t="ABCDEFGHIJKL9MNOPQRST8UVWXYZabcdeAfghijklmnopqZrstuvwxyz01T2343567hD89",e="VAR",a=0;a<17;a++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}}),mounted:function(){this.categories.length||this.getCategories()}},m=l,c=a("2877"),d=a("9989"),u=a("e359"),v=a("65c6"),p=a("9c40"),f=a("6ac5"),b=a("0378"),g=a("27f9"),h=a("ddd8"),_=a("d66b"),q=a("1c1c"),k=a("66e5"),x=a("4074"),C=a("0016"),w=a("7ff0"),y=a("05c0"),I=a("24e8"),V=a("f09f"),S=a("a370"),Q=a("2eeb"),P=a("7f67"),$=a("eebe"),D=a.n($),F=Object(c["a"])(m,i,r,!1,null,null,null);e["default"]=F.exports;D()(F,"components",{QPage:d["a"],QHeader:u["a"],QToolbar:v["a"],QBtn:p["a"],QToolbarTitle:f["a"],QForm:b["a"],QInput:g["a"],QSelect:h["a"],QEditor:_["a"],QList:q["a"],QItem:k["a"],QItemSection:x["a"],QIcon:C["a"],QFooter:w["a"],QTooltip:y["a"],QDialog:I["a"],QCard:V["a"],QCardSection:S["a"]}),D()(F,"directives",{GoBack:Q["a"],ClosePopup:P["a"]})}}]);